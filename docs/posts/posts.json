[
  {
    "path": "posts/2024-06-05-new-post-test/",
    "title": "A great bar chart",
    "description": "A function for better than out of the gg-box bar charts, \nusing tidyverse & Plotly.",
    "author": [
      {
        "name": "Brianna Argall",
        "url": {}
      }
    ],
    "date": "2024-08-26",
    "categories": [],
    "contents": "\r\nOriginal context\r\nThis function was made for use in exploratory data analysis of a heart failure dataset.\r\nOn to the function!\r\n\r\n\r\nggbar <- function(xvalue) {\r\n  \r\n  xvar_name <- deparse(substitute(xvalue))\r\n  xvar_spaces <- gsub(\"_\", \" \", xvar_name)\r\n  # I am using regex to convert the first letter from lowercase to uppercase  \r\n  # instead of using a prebuilt function because I want to avoid changing\r\n  # acronyms in capital letters to sentence or title case\r\n  xlab_title <- sub(\"\\\\b([a-z])\", \r\n                    \"\\\\U\\\\1\", \r\n                    (gsub(\"_\", \" \", xvar_spaces)),\r\n                    perl=TRUE)\r\n  \r\n  p <- df %>%\r\n    ggplot(aes(x = {{xvalue}}, fill = {{xvalue}})) +\r\n    labs(x = xlab_title, y = \"Count\", \r\n         title = paste(\"Bar chart of\", gsub(\"_\", \" \", xvar_spaces))) +\r\n    geom_bar() +\r\n    theme(panel.grid.major.x = element_blank()) +\r\n    scale_fill_viridis_d()\r\n  \r\n  ggplotly(p) %>%\r\n  hide_legend()\r\n  \r\n}\r\n\r\n\r\nExample using Iris\r\nIris is convenient as an inbuilt dataset but this is pretty boring….\r\nIt also doesn’t demonstrate the work I did to automatically make the x-axis title nicer. Nonetheless you can see that it is less boring than the standard.\r\n\r\n\r\ndf <- iris\r\n\r\nggbar(Species)\r\n\r\n\r\n\r\nWithout using the function\r\nWe can see here that the out of the box bar chart is boring grey, has vertical gridlines in the background (unecessary ink distracting from data in a bar chart) and has a sad y-axis label we would manually change. On a different dataset, we might appreciate more that the use of Plotly in ggbar() allows us to zoom in and pan on the figure without reaching for Shiny. We might also value setting the dataframe inside the function (I don’t normally assign to df!) so we aren’t retyping the dataframe each time we make a plot of a categorical variable.\r\n\r\n\r\nggplot(iris, aes(x = Species)) +\r\n  geom_bar()\r\n\r\n\r\n\r\nWhat was I doing before?\r\nHere is an example of a bar chart I made for EDA of a synthetic HIV dataset.\r\n\r\n\r\nart_hiv %>%\r\n  ggplot(aes(x = reorder(Comp_INI, Comp_INI, length), fill = Comp_INI)) +\r\n  geom_bar() +\r\n  scale_y_continuous(labels = scales::label_comma()) +\r\n  scale_fill_manual(values = c(\"#b3e2cd\", \"#f4cae4\", \"#e6f5c9\", \"#E1E1E1\")) +\r\n  ggtitle( \"Complementary integrase inhibitor bar chart\") +\r\n  xlab(\"Complementary integrase inhibitor\") +\r\n  ylab(\"Count\") +\r\n  theme_bw() +\r\n  theme(panel.border = element_blank(),\r\n        panel.grid.major.x = element_blank(),\r\n        legend.position = \"None\")\r\n\r\n\r\nIt is pretty but it was also a lot of repetition to produce a bunch of similar charts.\r\n\r\n\r\n\r\nFor the specific case of binary variables I had:\r\n\r\n\r\nbinary_figure <- function(xvalue) {\r\n  art_hiv %>%\r\n    ggplot(aes(x = {{xvalue}}, fill = {{xvalue}})) +\r\n    geom_bar() +\r\n    scale_y_continuous(labels = scales::label_comma(),\r\n                       name = \"Count\") +\r\n    # I just think the only grey is boring & defaults were ugly (too saturated)\r\n    # I also wanted to avoid red or green symbolism\r\n    scale_fill_manual(values = c(\"#8dd3c7\", \"#bebada\")) +\r\n    theme_bw() +\r\n    theme(panel.border = element_blank(),\r\n          panel.grid.major.x = element_blank(),\r\n          legend.position = \"None\") +\r\n    stat_count(geom = \"text\", aes(label = after_stat(count)), vjust = -0.5)\r\n}\r\n\r\n\r\nComments\r\nYou’ll notice these functions have a few differences, owing to differences in the datasets and the task. My ggbar() function was from a dataset that had a lot of variables and not as many rows, so handling the variable names was important and there was no need to display large counts nicely. binary_figure() doesn’t provide any interactivity and the counts are labelled with the bars (yes I did also consider y axis transformation to make these easier to read). I loved my custom grey that matched the intensity of the colours perfectly for the other column. To achieve this I took the rgb values from my colours - which were selected from a colorbrewer pallette - and found the hsv code corresponding to setting the red, green and blue content each to the average of those three components.\r\n\r\n\r\n\r\n",
    "preview": "posts/2024-06-05-new-post-test/new-post-test_files/figure-html5/unnamed-chunk-3-1.png",
    "last_modified": "2024-08-26T18:05:59+10:00",
    "input_file": {}
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Brianna's Blog",
    "description": "Not much to say here",
    "author": [
      {
        "name": "Brianna Argall",
        "url": {}
      }
    ],
    "date": "2024-06-05",
    "categories": [],
    "contents": "\r\nHi! Although I hope readers find something useful or interesting from this blog, for now it’s mostly a place for me to bring together - and possible refine more - techniques I have used. I’ve found that I like having examples of my own work I can copy-paste-adapt.\r\nI’m guessing I’ll run my code on examples provided in base R most of the time but I don’t promise consistency in that regard.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2024-08-26T16:09:52+10:00",
    "input_file": {}
  }
]
